{% extends "partials/base.html" %}
{% load static %}

{% block extra_head %}
<script src="https://cdn.maptiler.com/maplibre-gl-js/v2.4.0/maplibre-gl.js"></script>
<link href="https://cdn.maptiler.com/maplibre-gl-js/v2.4.0/maplibre-gl.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'css/maps.css' %}">
{% endblock %}

{% block content %}
<div class="app-container">
    <div class="map-container">
        <div id="map"></div>
        <button class="toggle-view-btn">
            <i class="fas fa-expand-alt"></i>
            <span class="toggle-text">Ver mapa completo</span>
        </button>
    </div>

    <div class="points-list-container">
        <div class="points-list-header">
            <h2>Puntos de Reciclaje</h2>
        </div>
        <div id="recyclingPointsList"></div>
    </div>

    <div id="pointDetails" class="point-details">
        <button class="close-details">
            <i class="fas fa-times"></i>
        </button>
        <div class="point-details-content">
            <h3 class="point-name"></h3>
            <p class="point-address"></p>
            
            <div class="details-section">
                <h4>Tipos de residuos aceptados</h4>
                <div class="waste-types-list"></div>
            </div>
            
            <div class="details-section">
                <h4>Horario</h4>
                <div class="opening-hours"></div>
            </div>
            
            <div class="details-section">
                <h4>Contacto</h4>
                <div class="contact-info"></div>
            </div>

            <button class="directions-button">
                <i class="fas fa-directions"></i>
                CÃ³mo llegar
            </button>
        </div>
    </div>

    <div id="loadingIndicator" class="loading-indicator hidden">
        <div class="spinner"></div>
        <span>Cargando...</span>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    const RECYCLING_POINTS_API_URL = '{{ recycling_points_api_url|safe }}';
    const MAPTILER_KEY = '{{ maptiler_key }}';
</script>
<script src="{% static 'js/app.js' %}"></script>
{% endblock %}