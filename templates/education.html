{% extends "partials/base.html" %}
{% load static %}

{% block title %}Aprende - SmartWaste{% endblock %}

{% block extra_head %}
<style>
    /* Contenedor principal adaptativo */
    .education-container {
        min-height: calc(100vh - 144px); /* Ajuste para nav superior (64px) e inferior (80px) */
        padding-bottom: 80px; /* Espacio para bottom nav */
    }
    
    /* Navegación de secciones */
    .section-nav {
        position: sticky;
        top: 64px; /* Altura del nav superior */
        background: white;
        z-index: 30;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .section-nav-scroll {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    
    .section-nav-scroll::-webkit-scrollbar {
        display: none;
    }
    
    .section-tab {
        position: relative;
        padding: 1rem;
        white-space: nowrap;
        transition: all 0.3s ease;
    }
    
    .section-tab.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: #10B981;
    }
    
    /* Contenido de secciones */
    .section-content {
        display: none;
        padding: 1rem;
    }
    
    .section-content.active {
        display: block;
        animation: fadeIn 0.4s ease-in-out;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Cards y elementos */
    .info-card {
        height: 100%;
        transition: transform 0.3s ease;
        background: white;
        border-radius: 1rem;
        overflow: hidden;
    }
    
    @media (min-width: 768px) {
        .info-card:hover {
            transform: translateY(-5px);
        }
    }
    
    /* Animaciones */
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
        100% { transform: translateY(0px); }
    }
    
    .float-icon {
        animation: float 3s ease-in-out infinite;
    }
</style>
{% endblock %}

{% block content %}
<div class="education-container bg-gray-50">
    <!-- Navegación de secciones -->
    {% include 'partials/video_section.html' %}
    <nav class="section-nav">
        <div class="section-nav-scroll flex">
            <button class="section-tab active flex items-center space-x-2" data-section="fundamentals">
                <i class="fas fa-recycle"></i>
                <span>Fundamentos</span>
            </button>
            <button class="section-tab flex items-center space-x-2" data-section="waste-types">
                <i class="fas fa-trash-alt"></i>
                <span>Tipos</span>
            </button>
            <button class="section-tab flex items-center space-x-2" data-section="tips">
                <i class="fas fa-lightbulb"></i>
                <span>Consejos</span>
            </button>
            <button class="section-tab flex items-center space-x-2" data-section="water">
                <i class="fas fa-water"></i>
                <span>Agua</span>
            </button>
        </div>
    </nav>

    <!-- Contenido de secciones -->
    <div class="section-content active" id="fundamentals">
        <div class="space-y-4">
            <!-- Por qué reciclar -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-seedling text-xl text-green-500 float-icon"></i>
                    </div>
                    <h2 class="text-xl font-semibold ml-3">¿Por qué reciclar?</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-green-50 rounded-lg p-3">
                        <i class="fas fa-tree text-green-500 mb-2 float-icon"></i>
                        <p class="text-sm">Salvamos 17 árboles por cada tonelada de papel</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3">
                        <i class="fas fa-tint text-green-500 mb-2 float-icon"></i>
                        <p class="text-sm">Ahorramos 26,000 litros de agua por tonelada</p>
                    </div>
                </div>
            </div>

            <!-- 3R -->
            <div class="info-card p-4 shadow-sm">
                <h3 class="text-lg font-semibold mb-3">Las 3R del Reciclaje</h3>
                <div class="grid grid-cols-3 gap-3">
                    <div class="bg-green-50 rounded-lg p-3 text-center">
                        <i class="fas fa-minus-circle text-green-500 mb-2 float-icon"></i>
                        <p class="text-sm font-medium">Reduce</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 text-center">
                        <i class="fas fa-sync text-blue-500 mb-2 float-icon"></i>
                        <p class="text-sm font-medium">Reutiliza</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3 text-center">
                        <i class="fas fa-recycle text-purple-500 mb-2 float-icon"></i>
                        <p class="text-sm font-medium">Recicla</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tipos de Residuos -->
    <div class="section-content" id="waste-types">
        <div class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Vidrio -->
                <div class="info-card p-4 shadow-sm">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-wine-bottle text-yellow-500 float-icon"></i>
                        </div>
                        <h3 class="text-lg font-semibold ml-3">Vidrio</h3>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">100% reciclable infinitas veces</p>
                    <div class="bg-yellow-50 rounded-lg p-3">
                        <div class="space-y-2 text-sm">
                            <div><i class="fas fa-check text-yellow-500 mr-2"></i>Botellas</div>
                            <div><i class="fas fa-check text-yellow-500 mr-2"></i>Frascos</div>
                            <div><i class="fas fa-check text-yellow-500 mr-2"></i>Tarros</div>
                        </div>
                    </div>
                </div>

                <!-- Papel -->
                <div class="info-card p-4 shadow-sm">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-newspaper text-blue-500 float-icon"></i>
                        </div>
                        <h3 class="text-lg font-semibold ml-3">Papel</h3>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Reciclable hasta 6 veces</p>
                    <div class="bg-blue-50 rounded-lg p-3">
                        <div class="space-y-2 text-sm">
                            <div><i class="fas fa-check text-blue-500 mr-2"></i>Periódicos</div>
                            <div><i class="fas fa-check text-blue-500 mr-2"></i>Revistas</div>
                            <div><i class="fas fa-check text-blue-500 mr-2"></i>Documentos</div>
                        </div>
                    </div>
                </div>

                <!-- Plástico -->
                <div class="info-card p-4 shadow-sm">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-bottle-water text-red-500 float-icon"></i>
                        </div>
                        <h3 class="text-lg font-semibold ml-3">Plástico</h3>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Identificar tipo para reciclar</p>
                    <div class="bg-red-50 rounded-lg p-3">
                        <div class="space-y-2 text-sm">
                            <div><i class="fas fa-check text-red-500 mr-2"></i>Botellas PET</div>
                            <div><i class="fas fa-check text-red-500 mr-2"></i>Envases HDPE</div>
                            <div><i class="fas fa-check text-red-500 mr-2"></i>Contenedores</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guía de separación -->
            <div class="info-card p-4 shadow-sm mt-4">
                <h3 class="text-lg font-semibold mb-4">Guía de Separación por Colores</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-box text-yellow-500 float-icon"></i>
                        </div>
                        <p class="text-sm font-medium">Amarillo</p>
                        <p class="text-xs text-gray-600">Envases y plásticos</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-newspaper text-blue-500 float-icon"></i>
                        </div>
                        <p class="text-sm font-medium">Azul</p>
                        <p class="text-xs text-gray-600">Papel y cartón</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-wine-bottle text-green-500 float-icon"></i>
                        </div>
                        <p class="text-sm font-medium">Verde</p>
                        <p class="text-xs text-gray-600">Vidrio</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-trash text-gray-500 float-icon"></i>
                        </div>
                        <p class="text-sm font-medium">Gris/Negro</p>
                        <p class="text-xs text-gray-600">Residuos generales</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Consejos -->
    <div class="section-content" id="tips">
        <div class="space-y-4">
            <!-- En Casa -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-home text-indigo-500 float-icon"></i>
                    </div>
                    <h3 class="text-lg font-semibold ml-3">En Casa</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-indigo-50 rounded-lg p-3">
                        <i class="fas fa-box-open text-indigo-500 mb-2"></i>
                        <p class="text-sm">Aplasta envases y cajas para ahorrar espacio</p>
                    </div>
                    <div class="bg-indigo-50 rounded-lg p-3">
                        <i class="fas fa-trash-arrow-up text-indigo-500 mb-2"></i>
                        <p class="text-sm">Separa residuos desde el origen</p>
                    </div>
                </div>
            </div>

            <!-- Compras Conscientes -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-shopping-bag text-green-500 float-icon"></i>
                    </div>
                    <h3 class="text-lg font-semibold ml-3">Compras Conscientes</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-green-50 rounded-lg p-3">
                        <i class="fas fa-leaf text-green-500 mb-2"></i>
                        <p class="text-sm">Elige productos con menos embalaje</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3">
                        <i class="fas fa-bag-shopping text-green-500 mb-2"></i>
                        <p class="text-sm">Lleva tus propias bolsas reutilizables</p>
                    </div>
                </div>
            </div>

            <!-- Ideas Creativas -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-wand-magic-sparkles text-purple-500 float-icon"></i>
                    </div>
                    <h3 class="text-lg font-semibold ml-3">Ideas Creativas</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="bg-purple-50 rounded-lg p-3">
                        <i class="fas fa-jar text-purple-500 mb-2"></i>
                        <p class="text-sm">Convierte frascos en organizadores</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3">
                        <i class="fas fa-seedling text-purple-500 mb-2"></i>
                        <p class="text-sm">Usa botellas como macetas</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3">
                        <i class="fas fa-palette text-purple-500 mb-2"></i>
                        <p class="text-sm">Crea arte con materiales reciclados</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Agua -->
    <div class="section-content" id="water">
        <div class="space-y-4">
            <!-- Consumo Responsable -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-faucet-drip text-blue-500 float-icon"></i>
                    </div>
                    <h3 class="text-lg font-semibold ml-3">Consumo Responsable</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-blue-50 rounded-lg p-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-shower text-blue-500 text-xl"></i>
                            <div>
                                <p class="font-medium text-sm">Duchas Cortas</p>
                                <p class="text-xs text-gray-600">Ahorra hasta 100L por ducha</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-sink text-blue-500 text-xl"></i>
                            <div>
                                <p class="font-medium text-sm">Cierra el Grifo</p>
                                <p class="text-xs text-gray-600">Al lavarte los dientes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reutilización -->
            <div class="info-card p-4 shadow-sm">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-recycle text-teal-500 float-icon"></i>
                    </div>
                    <h3 class="text-lg font-semibold ml-3">Reutilización del Agua</h3>
                </div>
                <div class="space-y-3">
                    <div class="bg-teal-50 rounded-lg p-3">
                        <h4 class="font-medium text-sm mb-2">Agua de Lluvia</h4>
                        <ul class="space-y-2 text-sm">
                            <li><i class="fas fa-check text-teal-500 mr-2"></i>Recolecta para el jardín</li>
                            <li><i class="fas fa-check text-teal-500 mr-2"></i>Limpieza exterior</li>
                        </ul>
                    </div>
                    <div class="bg-teal-50 rounded-lg p-3">
                        <h4 class="font-medium text-sm mb-2">Agua Doméstica</h4>
                        <ul class="space-y-2 text-sm">
                            <li><i class="fas fa-check text-teal-500 mr-2"></i>Reutiliza agua de cocina</li>
                        </ul>
                    </div>
                </div>
            </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.section-tab');
    const sections = document.querySelectorAll('.section-content');
    let currentSection = 0;

    // Gestor de tabs
    tabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
            updateActiveTab(index);
        });
    });

    function updateActiveTab(index) {
        // Remover clases activas
        tabs.forEach(tab => tab.classList.remove('active'));
        sections.forEach(section => section.classList.remove('active'));

        // Activar tab y sección
        tabs[index].classList.add('active');
        sections[index].classList.add('active');
        
        // Scroll suave al contenido
        sections[index].scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        currentSection = index;
    }

    // Soporte para gestos táctiles
    let touchStartX = 0;
    let touchEndX = 0;

    document.addEventListener('touchstart', e => {
        touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    document.addEventListener('touchend', e => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }, { passive: true });

    function handleSwipe() {
        const SWIPE_THRESHOLD = 50;
        const diffX = touchStartX - touchEndX;

        if (Math.abs(diffX) > SWIPE_THRESHOLD) {
            if (diffX > 0 && currentSection < tabs.length - 1) {
                updateActiveTab(currentSection + 1);
            } else if (diffX < 0 && currentSection > 0) {
                updateActiveTab(currentSection - 1);
            }
        }
    }
});
</script>
{% endblock %}